(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{506:function(t,e,i){"use strict";var n=i(171),s=i(170),a=i(6),r=i(20),l=i(99),o=i(172),d=i(14),u=i(173),f=i(72),c=i(2),p=[].push,v=Math.min,h=!c((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(r(this)),a=void 0===i?4294967295:i>>>0;if(0===a)return[];if(void 0===t)return[n];if(!s(t))return e.call(n,t,a);for(var l,o,d,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,h=new RegExp(t.source,c+"g");(l=f.call(h,n))&&!((o=h.lastIndex)>v&&(u.push(n.slice(v,l.index)),l.length>1&&l.index<n.length&&p.apply(u,l.slice(1)),d=l[0].length,v=o,u.length>=a));)h.lastIndex===l.index&&h.lastIndex++;return v===n.length?!d&&h.test("")||u.push(""):u.push(n.slice(v)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var s=r(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,s,i):n.call(String(s),e,i)},function(t,s){var r=i(n,t,this,s,n!==e);if(r.done)return r.value;var f=a(t),c=String(this),p=l(f,RegExp),_=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(h?"y":"g"),g=new p(h?f:"^(?:"+f.source+")",m),y=void 0===s?4294967295:s>>>0;if(0===y)return[];if(0===c.length)return null===u(g,c)?[c]:[];for(var C=0,L=0,b=[];L<c.length;){g.lastIndex=h?L:0;var O,x=u(g,h?c:c.slice(L));if(null===x||(O=v(d(g.lastIndex+(h?0:L)),c.length))===C)L=o(c,L,_);else{if(b.push(c.slice(C,L)),b.length===y)return b;for(var S=1;S<=x.length-1;S++)if(b.push(x[S]),b.length===y)return b;L=C=O}}return b.push(c.slice(C)),b}]}),!h)},508:function(t,e,i){"use strict";var n=i(1),s=i(98),a=i(45),r=i(14),l=i(11),o=i(100),d=i(47),u=i(46),f=i(18),c=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min;n({target:"Array",proto:!0,forced:!c||!p},{splice:function(t,e){var i,n,u,f,c,p,_=l(this),m=r(_.length),g=s(t,m),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=m-g):(i=y-2,n=h(v(a(e),0),m-g)),m+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=o(_,n),f=0;f<n;f++)(c=g+f)in _&&d(u,f,_[c]);if(u.length=n,i<n){for(f=g;f<m-n;f++)p=f+i,(c=f+n)in _?_[p]=_[c]:delete _[p];for(f=m;f>m-n+i;f--)delete _[f-1]}else if(i>n)for(f=m-n;f>g;f--)p=f+i-1,(c=f+n-1)in _?_[p]=_[c]:delete _[p];for(f=0;f<i;f++)_[f+g]=arguments[f+2];return _.length=m-n+i,u}})},552:function(t,e,i){},605:function(t,e,i){var n=i(1),s=i(606);n({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},606:function(t,e,i){"use strict";var n=i(15),s=i(45),a=i(14),r=i(33),l=i(18),o=Math.min,d=[].lastIndexOf,u=!!d&&1/[1].lastIndexOf(1,-0)<0,f=r("lastIndexOf"),c=l("indexOf",{ACCESSORS:!0,1:0}),p=u||!f||!c;t.exports=p?function(t){if(u)return d.apply(this,arguments)||0;var e=n(this),i=a(e.length),r=i-1;for(arguments.length>1&&(r=o(r,s(arguments[1]))),r<0&&(r=i+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:d},607:function(t,e,i){"use strict";i(552)},620:function(t,e,i){"use strict";i.r(e);i(44),i(67),i(499);var n=i(496),s=i(500),a=i(505),r=(i(174),i(27),i(106),i(96),i(175),i(605),i(71),i(508),i(68),i(166),i(28),i(506),i(42)),l=i(498);var o={get:function(){},post:function(t,e){!function(t,e,i){var n=new XMLHttpRequest;n.open(t,e),n.onload=function(){var t;null===(t=i.success)||void 0===t||t.call(i,n.response)},n.onerror=function(){var t;null===(t=i.fail)||void 0===t||t.call(i,n,n.status)},n.send(i.data)}("post",t,e)},put:function(){},delete:function(){},patch:function(){}},d={name:"diff-uploader",components:{DiffIcon:l.a},data:function(){return{url:"about:blank"}},props:{name:{type:String,required:!0},action:{type:String,required:!0},method:{type:String,default:"POST"},parseResponse:{type:Function,required:!0},fileList:{type:Array,default:function(){return[]}},sizeLimit:{type:Number},accept:{type:String,default:"image/*"},multiple:{type:Boolean,default:!1}},methods:{onDeleteFile:function(t){if(window.confirm("你确定要删除吗")){var e=Object(r.a)(this.fileList),i=e.indexOf(t);e.splice(i,1),this.$emit("update:fileList",e)}},createInput:function(){this.$refs.temp.innerHTML="";var t=document.createElement("input");return t.accept=this.accept,t.type="file",t.multiple=this.multiple,this.$refs.temp.appendChild(t),t},beforeUploadFiles:function(t,e){t=Array.from(t);for(var i=0;i<t.length;i++){var n=t[i],s=n.size;n.type;if(s>this.sizeLimit)return this.$emit("error","文件过大"),!1}var a=t.map((function(t,i){var n=t.type,s=t.size;return{name:e[i],type:n,size:s,status:"uploading"}}));return this.$emit("update:fileList",[].concat(Object(r.a)(this.fileList),Object(r.a)(a))),!0},afterUploadFiles:function(t,e){var i=this.fileList.filter((function(e){return e.name===t}))[0],n=this.fileList.indexOf(i),s=JSON.parse(JSON.stringify(i));s.url=e,s.status="success";var a=Object(r.a)(this.fileList);a.splice(n,1,s),this.$emit("update:fileList",a),this.$emit("uploaded")},uploadFiles:function(t){for(var e=this,i=[],n=0;n<t.length;n++){var s=t[n].name;i[n]=this.generateName(s)}if(this.beforeUploadFiles(t,i))for(var a=function(n){var s=t[n],a=i[n],r=new FormData;r.append(e.name,s),e.doUploadFiles(r,(function(t){var i=e.parseResponse(t);e.url=i,e.afterUploadFiles(a,i)}),(function(t){e.uploadError(t,a)}))},r=0;r<t.length;r++)a(r)},uploadError:function(t,e){var i=this.fileList.filter((function(t){return t.name===e}))[0],n=this.fileList.indexOf(i),s=JSON.parse(JSON.stringify(i));s.status="fail";var a=JSON.parse(JSON.stringify(this.fileList));a.splice(n,1,s),this.$emit("update:fileList",a);var r="";0===t.status&&(r="网络中断"),this.$emit("error",r)},generateName:function(t){if(this.fileList.filter((function(e){return e.name===t})).length>0){var e=t.lastIndexOf("."),i=t.substring(0,e),n=t.substring(e);if(t=i+"(1)"+n,this.fileList.filter((function(e){return e.name===t})).length>0)for(var s=2;this.fileList.filter((function(e){return e.name===t})).length>0;){var a=t.lastIndexOf("."),r=t.substring(0,a),l=r.split("");l.splice(-2,1,s),r=l.join("");var o=t.substring(a);t=r+o,s++}}return t},doUploadFiles:function(t,e,i){o[this.method.toLowerCase()](this.action,{success:e,fail:i,data:t})},onClickUpload:function(){var t=this,e=this.createInput();e.addEventListener("change",(function(){t.uploadFiles(e.files),e.remove()})),e.click()}}},u=(i(607),i(26)),f=Object(u.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"diff-uploader"},[i("div",{ref:"trigger",on:{click:t.onClickUpload}},[t._t("default")],2),t._v(" "),i("ol",{staticClass:"diff-uploader-fileList"},t._l(t.fileList,(function(e){var n;return i("li",{key:e.name},["uploading"===e.status?[i("div",{staticClass:"diff-uploader-loading-wrapper"},[i("diff-icon",{staticClass:"diff-uploader-loading",attrs:{name:"loading"}})],1)]:0===e.type.indexOf("image")?[i("img",{staticClass:"diff-uploader-image",attrs:{src:e.url,width:"32",height:"32",alt:""}})]:[i("div",{staticClass:"diff-uploader-defaultImage"})],t._v(" "),i("span",{staticClass:"diff-uploader-name",class:(n={},n[e.status]=e.status,n)},[t._v(t._s(e.name))]),t._v(" "),i("button",{staticClass:"diff-uploader-delete",on:{click:function(i){return t.onDeleteFile(e)}}},[t._v("x")])],2)})),0),t._v(" "),i("div",{ref:"temp",staticStyle:{width:"0",height:"0",overflow:"hidden"}})])}),[],!1,null,"0a74efda",null).exports,c={name:"uploader-demo",mixins:[n.a],components:{Demo:s.default,"diff-button":a.a,"diff-uploader":f},data:function(){return{fileList:[],error:"",codeDemo1:'\n        <diff-uploader\n          accept="image/*"\n          method="POST"\n          action="http://127.0.0.1:3000/upload"\n          name="file"\n          :parseResponse="parseResponse"\n          :file-list.sync="fileList"\n          @error="error=$event"\n          :size-limit="1024*1024"\n        >\n          <diff-button icon="upload">上传</diff-button>\n        </diff-uploader>\n\n        data() {\n          return {\n            fileList: [],\n            error: \'\',\n          }\n        }\n\n        methods: {\n          parseResponse (response) {\n            let object = JSON.parse(response)\n            let url = \'http://127.0.0.1:3000/preview/\'+object.id\n            return url\n          },\n          updateFileList(newFileList){\n            this.fileList = newFileList\n          }\n        }\n      '.replace(/^ {8}/gm,"").trim()}},methods:{parseResponse:function(t){return"http://127.0.0.1:3000/preview/"+JSON.parse(t).id},updateFileList:function(t){this.fileList=t}}},p=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"demo"},[i("h3",[t._v("基本使用")]),t._v(" "),i("Demo",{attrs:{index:0,"source-code":t.codeDemo1}},[i("diff-uploader",{attrs:{accept:"image/*",method:"POST",action:"http://127.0.0.1:3000/upload",name:"file",parseResponse:t.parseResponse,"file-list":t.fileList,"size-limit":1048576},on:{"update:fileList":function(e){t.fileList=e},"update:file-list":function(e){t.fileList=e},error:function(e){t.error=e}}},[i("diff-button",{attrs:{icon:"upload"}},[t._v("上传")])],1)],1)],1),t._v(" "),t._m(0)])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"demo"},[i("h3",[t._v("Uploader Props")]),t._v(" "),i("div",{staticClass:"attr"},[i("table",[i("thead",[i("tr",[i("th",[t._v("参数")]),t._v(" "),i("th",{staticClass:"des"},[t._v("说明")]),t._v(" "),i("th",{staticClass:"type"},[t._v("类型")]),t._v(" "),i("th",[t._v("可选值")]),t._v(" "),i("th",[t._v("默认值")])])]),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("name")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传的文件名")]),t._v(" "),i("td",{staticClass:"type"},[t._v("String")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("——")])]),t._v(" "),i("tr",[i("td",[t._v("action")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传地址，必选")]),t._v(" "),i("td",{staticClass:"type"},[t._v("String")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("——")])]),t._v(" "),i("tr",[i("td",[t._v("method")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传文件的请求方法")]),t._v(" "),i("td",{staticClass:"type"},[t._v("String")]),t._v(" "),i("td",[t._v("GET，POST")]),t._v(" "),i("td",[t._v("POST")])]),t._v(" "),i("tr",[i("td",[t._v("parseResponse")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传成功后的回调，必选，需要返回图片的 url 给 uploader 处理。")]),t._v(" "),i("td",{staticClass:"type"},[t._v("Function")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("——")])]),t._v(" "),i("tr",[i("td",[t._v("fileList")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传的文件列表，默认传空数组。数组内部是文件对象组成的集合，对象包括name，type，size，status")]),t._v(" "),i("td",{staticClass:"type"},[t._v("Array")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("[]")])]),t._v(" "),i("tr",[i("td",[t._v("sizeLimit")]),t._v(" "),i("td",{staticClass:"des"},[t._v("上传文件大小限制")]),t._v(" "),i("td",{staticClass:"type"},[t._v("Number")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("——")])]),t._v(" "),i("tr",[i("td",[t._v("accept")]),t._v(" "),i("td",{staticClass:"des"},[t._v("支持上传的文件类型")]),t._v(" "),i("td",{staticClass:"type"},[t._v("String")]),t._v(" "),i("td",[t._v("——")]),t._v(" "),i("td",[t._v("image/*")])]),t._v(" "),i("tr",[i("td",[t._v("multiple")]),t._v(" "),i("td",{staticClass:"des"},[t._v("是否支持多个文件")]),t._v(" "),i("td",{staticClass:"type"},[t._v("Boolean")]),t._v(" "),i("td",[t._v("true,false")]),t._v(" "),i("td",[t._v("false")])])])])])])}],!1,null,"b6bdd056",null);e.default=p.exports}}]);